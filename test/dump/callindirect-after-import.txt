;;; FLAGS: -dv
(module
  (type $f_v (func (param f32)))

  ;; import 0
  (import $imported "foo" "bar" (result i32))

  ;; func 0
  (func $indirect (param f32)
    (nop))

  ;; func 1
  (func $caller
    (call_indirect $f_v (f32.const 1.0) (i32.const 0)))

  ;; should be function 1.
  (table anyfunc (elem $indirect)))
(;; STDOUT ;;;
0000000: 0061 736d                                  ; WASM_BINARY_MAGIC
0000004: 0c00 0000                                  ; WASM_BINARY_VERSION
; section "type"
0000008: 04                                         ; string length
0000009: 7479 7065                                  ; section id: "type"
000000d: 00                                         ; section size (guess)
000000e: 03                                         ; num types
; type 0
000000f: 40                                         ; function form
0000010: 01                                         ; num params
0000011: 03                                         ; param type
0000012: 00                                         ; num results
; type 1
0000013: 40                                         ; function form
0000014: 00                                         ; num params
0000015: 01                                         ; num results
0000016: 01                                         ; result_type
; type 2
0000017: 40                                         ; function form
0000018: 00                                         ; num params
0000019: 00                                         ; num results
000000d: 0c                                         ; FIXUP section size
; section "import"
000001a: 06                                         ; string length
000001b: 696d 706f 7274                             ; section id: "import"
0000021: 00                                         ; section size (guess)
0000022: 01                                         ; num imports
; import header 0
0000023: 01                                         ; import signature index
0000024: 03                                         ; string length
0000025: 666f 6f                                  foo  ; import module name
0000028: 03                                         ; string length
0000029: 6261 72                                  bar  ; import function name
0000021: 0a                                         ; FIXUP section size
; section "function"
000002c: 08                                         ; string length
000002d: 6675 6e63 7469 6f6e                        ; section id: "function"
0000035: 00                                         ; section size (guess)
0000036: 02                                         ; num functions
0000037: 00                                         ; function 0 signature index
0000038: 02                                         ; function 1 signature index
0000035: 03                                         ; FIXUP section size
; section "table"
0000039: 05                                         ; string length
000003a: 7461 626c 65                               ; section id: "table"
000003f: 00                                         ; section size (guess)
0000040: 20                                         ; table elem type
0000041: 01                                         ; table flags
0000042: 01                                         ; table initial elems
0000043: 01                                         ; table max elems
000003f: 04                                         ; FIXUP section size
; section "code"
0000044: 04                                         ; string length
0000045: 636f 6465                                  ; section id: "code"
0000049: 00                                         ; section size (guess)
000004a: 02                                         ; num functions
; function body 0
000004b: 00                                         ; func body size (guess)
000004c: 00                                         ; local decl count
000004d: 0a                                         ; OPCODE_NOP
000004b: 02                                         ; FIXUP func body size
; function body 1
000004e: 00                                         ; func body size (guess)
000004f: 00                                         ; local decl count
0000050: 13                                         ; OPCODE_F32_CONST
0000051: 0000 803f                                  ; f32 literal
0000055: 10                                         ; OPCODE_I32_CONST
0000056: 00                                         ; i32 literal
0000057: 17                                         ; OPCODE_CALL_INDIRECT
0000058: 00                                         ; signature index
000004e: 0a                                         ; FIXUP func body size
0000049: 0f                                         ; FIXUP section size
; section "elem"
0000059: 04                                         ; string length
000005a: 656c 656d                                  ; section id: "elem"
000005e: 00                                         ; section size (guess)
000005f: 01                                         ; num elem segments
; elem segment header 0
0000060: 00                                         ; table index
0000061: 10                                         ; OPCODE_I32_CONST
0000062: 00                                         ; i32 literal
0000063: 0f                                         ; OPCODE_END
0000064: 01                                         ; num function indices
0000065: 00                                         ; function index
000005e: 07                                         ; FIXUP section size
;; dump
0000000: 0061 736d 0c00 0000 0474 7970 650c 0340  
0000010: 0103 0040 0001 0140 0000 0669 6d70 6f72  
0000020: 740a 0101 0366 6f6f 0362 6172 0866 756e  
0000030: 6374 696f 6e03 0200 0205 7461 626c 6504  
0000040: 2001 0101 0463 6f64 650f 0202 000a 0a00  
0000050: 1300 0080 3f10 0017 0004 656c 656d 0701  
0000060: 0010 000f 0100                           
;;; STDOUT ;;)
